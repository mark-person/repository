<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title></title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
<script type="text/javascript">
document.getElementsByTagName('html')[0].style.fontSize=window.screen.width/(7.5*3.45)+'px';
// å®½ï¼š25.875rem  25.875/2=12.9375
</script>

<link th:replace="common/fragment::mobile"/>
<script th:src="@{/static/cdn/template-3.0.0.js}"  type="text/javascript" ></script>


<script type="text/javascript" th:inline="javascript">

var controllerPath = contextPath + "auto/knowledge/";



$(function() {
	var list = [[${list}]];
	$("#knowDiv").append(template("itemTemplate", list));
});

function view(kId) {
	top.location.href = controllerPath + "mViewKnowledge?id=" + kId;
}

</script>

<style type="text/css">
#knowDiv {
	border:1px solid red;display:flex;justify-content:space-between;flex-wrap:wrap;
}
.know-item-div {
	border:1px solid green;background-color:white;margin:0.2rem 0rem;
}
.know-img {
	max-width:100%;max-height:100%;
}
.know-img-div {
	width:12rem;height:12rem;border:1px solid gray;display:table-cell;vertical-align:middle;text-align:center;
}
.know-title {
	width:12rem;display:-webkit-box !important; overflow:hidden;-webkit-line-clamp:1;-webkit-box-orient:vertical;
}
</style>
</head>

<body style="margin-top: 3rem;margin-bottom: 3rem;">
<script id="itemTemplate" type="text/html">
{{each list as v i}}
<div class="know-item-div" onclick="view({{v.kId}})">
	<div class="know-img-div"><img src="/img/{{v.mainImgSrc}}_100.jpg" class="know-img"></div>
	<div class="know-title">{{v.kTitle}}</div>
</div>
{{/each}}
</script>



<div style="position:fixed;top: 0;width:100%; background-color:#f0f0f0;padding:.2rem 0">
<div style="display:flex;justify-content:space-between; padding-left:0.5rem;padding-right:0.5rem;font-size: 0.825rem">
	<div style="width:100%">
		<form id="form">
		<input type="search" name="title" class="form-control" style="width:100%" placeholder="ğŸ”">
		</form>
	</div>
</div>
</div>

<script>
$('#form').submit(function (e) {
    e.preventDefault();
    e.stopPropagation();
    alert(1);
 })
</script>


<div id="knowDiv">
	
</div>















<div>
	<div class="page-bottom" id="pageMore" style="display: none;">
        <p style="text-align: center;">-- ä¸Šæ‹‰åŠ è½½æ›´å¤š --</p>
    </div>
    <div class="page-bottom" id="bottomLoading" style="display: none">
        <p style="text-align: center;">-- loading --</p>
    </div>
    <div class="page-bottom" id="pageEnd" style="display: none">
        <p style="text-align: center;">-- æˆ‘æ˜¯æœ‰åº•çº¿çš„ --</p>
    </div>
</div> 


<script type="text/javascript">

var hasMore = true;
var currentPageNumber = 1;

$(window).scroll(function() {
    var scrollTop = $(this).scrollTop();
    var scrollHeight = $(document).height();
    var clientHeight = $(this).height();
  	// è·ç¦»é¡¶éƒ¨+å½“å‰é«˜åº¦ >=æ–‡æ¡£æ€»é«˜åº¦ å³ä»£è¡¨æ»‘åŠ¨åˆ°åº•éƒ¨ æ³¨ï¼š-50 ä¸Šæ‹‰åŠ è½½æ›´çµæ•
  	
    if (scrollTop + clientHeight >= scrollHeight - 50) {   
    	// åŠ è½½æ•°æ®
    	if (hasMore) {
    		currentPageNumber++;
    		hasMore = false;
    		more();
    	}
    }
});

function more() {
	$(".page-bottom").hide();
	$("#bottomLoading").show();
	$.post(controllerPath + "/mList", {pageNumber:currentPageNumber}, function(r) {
		$("#knowDiv").append(template("itemTemplate", r));
		$(".page-bottom").hide();
		if (r.page.pageSize * r.page.pageNumber < r.page.totalRows) {
			hasMore = true;
			$("#pageMore").show();
		}
		else {
			$("#pageEnd").show();
		}
	});
}
</script>








<link th:replace="repository/knowledge/knowledge/menu::nav('homeMenu')"/>

</body>
</html>















